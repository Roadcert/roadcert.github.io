/*Pricing responsive fix*/
var moved = 0,
    width;

function pricingResize(){
  width = $(window).width()

  if(width <= 840  && moved != 1){ //clone normal pricing and modify
   moved = 1; 
   $(".pricing .hcard").hide();
   $(".vcard.gold").clone().insertAfter(".vcard.plat")
      .attr("id", "tmp-hcard")
      .css("border", "0");
   $("#tmp-hcard h1").html("up to 100<br/> vehicles");
  }else if(width >= 840){ //put original div back
    $("#tmp-hcard").remove();
    $(".pricing .hcard").show();
    moved = 0;
  }
}

function heightFix(){
  var newHeight = $("#f2-wb").height();
  $("#aw-sec").height( newHeight );
}

$(window).resize(function() { //on window resize
  pricingResize();
  heightFix();
  if ($("#earned-rec-section").offset().top < 700 && earnedRecSecAnimate){
    $("#earned-rec-section").css("height", "auto" );
  }
});

$(document).ready(function(){ //on page load
  pricingResize();
  heightFix();
  $("#earned-rec-section").velocity({"height": 0});
});

// $("div.android-be-together-section").removeClass("slide4").addClass("slide1");
$(".blast-animate2").css({ "display": "none"});
$("div.blast-animate")
        .blast({ delimiter: "character" })
        .css("opacity", 0)
        .velocity("transition.fadeIn", {
                stagger: 30,
                complete: function() {
                        $("div.blast-animate").blast(false);
                        $("div.blast-animate").blast({search: "fleet management" }).velocity({color: "#f2646e", "font-weight": "bold"}, {duration: 200});
                        $("div.blast-animate").blast({search: "digitised" }).velocity({color: "#fbb040", fontWeight: "bold"}, {delay:200, duration: 200});
                        $("div.blast-animate").blast({search: "revolutionised" }).velocity({color: "#8dc63f", fontWeight: "bold"}, {delay: 400, duration: 200,
                                complete: function() {
                                        // $("div.android-be-together-section").addClass("slide4");
                                        $(".blast-animate2").css({ "display": "inherit"});
                                        $(".blast-animate2").blast({ delimiter: "sentence" }).velocity("transition.perspectiveUpIn");
                                }
                        });
                }
        });

// $(document).ready(function(){
//         $(".scrollLink").click(function(event){
//                 event.preventDefault();
//                 event.stopPropagation();
//                 $(document).velocity("scroll", { container: $($(this).attr("href")) });
//         });
// });

var screensAnimate = false,
    feature2Animate = false,
    feature3Animate = false,
    layeredAnimation = false,
    earnedRecSecAnimate = false,
    contactAnimate = false;

$('.android-content').scroll(function() {


if ($("#top").offset().top <= 0) $("#contact-header-btn").removeClass("hide").css({opacity: 0}).velocity({opacity: 1}, {duration: 2000});

        if ($("#screens").offset().top < 300 && !screensAnimate) {
                screensAnimate = true;

                $(".blast-animate-screens").css("visibility", "visible");
                $(".blast-animate-screens").blast({ delimiter: "sentence" }).velocity("transition.perspectiveUpIn", {
                        complete: function() {
                                $(".blast-animate-screens").blast(false);
                                $(".blast-animate-screens").blast({search: "InformationNow" }).velocity({backgroundColor: "#f2646e", color: "#ffffff", "font-weight": "bold"}, {duration: 1000});
                                $(".blast-animate-screens").blast({search: "PowerNow" }).velocity({backgroundColor: "#fbb040", color: "#ffffff", fontWeight: "bold"}, {duration: 1000});
                                $(".blast-animate-screens").blast({search: "ComplianceNow" }).velocity({backgroundColor: "#8dc63f", color: "#ffffff", fontWeight: "bold"}, {duration: 1000,
                                        complete: function() {
                                                // $("div.android-be-together-section").addClass("slide4");
                                                // $(".blast-animate2").css({ "display": "inherit"});
                                                // $(".blast-animate2").blast({ delimiter: "sentence" }).velocity("transition.perspectiveUpIn");
                                        }
                                });
                        }
                });

                $(".blast-animate-screens").css("visibility", "visible");
                $(".blast-animate-screens").blast({ delimiter: "sentence" }).velocity("transition.perspectiveUpIn", {
                        complete: function() {
                                $(".blast-animate-screens").blast(false);
                                $(".blast-animate-screens").blast({search: "InformationNow" }).velocity({backgroundColor: "#f2646e", color: "#ffffff", "font-weight": "bold"}, {duration: 1000});
                                $(".blast-animate-screens").blast({search: "PowerNow" }).velocity({backgroundColor: "#fbb040", color: "#ffffff", fontWeight: "bold"}, {duration: 1000});
                                $(".blast-animate-screens").blast({search: "ComplianceNow" }).velocity({backgroundColor: "#8dc63f", color: "#ffffff", fontWeight: "bold"}, {duration: 1000});
                        }
                });
                $(".blast-animate-screens--image").css({"visibility": "visible"});
                $(".blast-animate-screens--image img").css({width: "100%"});
                $(".blast-animate-screens--image").velocity("transition.slideRightBigIn");
        }



        if ($("#feature2").offset().top < 520 && !feature2Animate) {
            feature2Animate = true;
            $("#f2-wb").fadeIn(300);
            $("#f2-wb .documents").css({"visibility": "visible"})
                                  .velocity("transition.slideLeftBigIn");
        }

        if ($("#earned-rec-section").offset().top < 700 && !earnedRecSecAnimate) {
          earnedRecSecAnimate = true;
          var autoHeight = $("#earned-rec-section").get(0).scrollHeight;
          $("#earned-rec-section").animate({ height: autoHeight}, 700);
          $("#er-header").blast({search: "Earned Recognition" }).delay(1000).velocity({color: "#f2646e", "font-weight": "bold"}, {duration: 200})
                         .delay(500).velocity({color: "#fbb040"}, {duration: 200})
                         .delay(500).velocity({color: "#8dc63f"}, {duration: 200});
          }

        if ($("#earned-rec-section .info").offset().top < 500) {
          $("#earned-rec-section .info li:first-of-type i").delay(1500).velocity({color: "#f2646e"}, {duration: 500});
          $("#earned-rec-section .info li:nth-of-type(2) i").delay(2500).velocity({color: "#fbb040"}, {duration: 500});
          $("#earned-rec-section .info li:nth-of-type(3) i").delay(3500).velocity({color: "#8dc63f"}, {duration: 500});
        }

        if ($("#feature3").offset().top < 650 && !feature3Animate) {
                feature3Animate = true;

                $("#pricing-title")
                  .css({"visibility": "visible"})
                  .velocity("transition.slideLeftBigIn");

                $("div.android-more-section .animate-more-card").css("visibility", "visible");
                $("div.android-more-section .animate-more-card").velocity("transition.flipXIn", {stagger: 100});
        }


        if ($("#contact").offset().top < 600 && !contactAnimate) {
            contactAnimate = true;
            $("#contact")
              .css({"visibility": "visible"})
              .velocity("transition.slideLeftBigIn");
            //.velocity("transition.slideRightBigIn");
        }
});

function isNumber(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
    }
    return true;
}




function validateEmail(email) {
  var tester = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return tester.test(email);
}

function ValidateForm(){

  var emailID= $('#mce-EMAIL').val();
  var fname= $('#mce-FNAME').val();
  var lname= $('#mce-LNAME').val();
  var phone= $('#mce-PNUM').val();
  var message= $('#mce-MESSAGE').val();


  $('#form-errors .error').fadeOut(10);

  if ((fname==null)||(fname=="")){
    $('#form-errors #no_fname').fadeIn('slow');
    $('#mce-FNAME').focus();
    return false
  }else if ((lname==null)||(lname=="")){
    $('#form-errors #no_lname').fadeIn('slow');
    $('#mce-LNAME').focus();
    return false
  }else if ((phone==null)||(phone=="")){
    $('#form-errors #no_phone').fadeIn('slow');
    $('#mce-PNUM').focus();
    return false
  }else if ((emailID==null)||(emailID=="")){
    $('#form-errors #no_email').fadeIn('slow');
    $('#mce-EMAIL').focus();
    return false
  }else if (validateEmail(emailID)==false){
    $('#form-errors #invalid_email').fadeIn();
    $('#mce-EMAIL').focus();
    return false
  }else if((message==null)||(message=="")){
    $('#form-errors #no_message').fadeIn('slow');
    $('#mce-MESSAGE').focus();
  }
  //return true
  //$('#mc-embedded-subscribe-form').submit();

  $.ajax({
     type: "POST",
     url: 'http://192.168.1.78:8080/email',
     dataType: 'json',
     data: $("#mc-embedded-subscribe-form").serialize(),
     success: function(response) {
        var feedback = response.MessageId;
        if(feedback!==null){
          $('.contact-form').children().hide();
          $('.contact-form').append('Thank you for completing the form. Your message has been sucessfully sent. We will get back to you as soon as possible. Your reference number is '+feedback+'.');
        }
     }
  });
 }

window.particlesJS("particles-js", {
  "particles": {
    "number": {
      "value": 80,
      "density": {
        "enable": true,
        "value_area": 800
      }
    },
    "color": {
      "value": "#dadada"
    },
    "shape": {
      "type": "circle",
      "stroke": {
        "width": 0,
        "color": "#000000"
      },
      "polygon": {
        "nb_sides": 5
      },
      "image": {
        "src": "img/github.svg",
        "width": 100,
        "height": 100
      }
    },
    "opacity": {
      "value": 0.5,
      "random": false,
      "anim": {
        "enable": false,
        "speed": 1,
        "opacity_min": 0.1,
        "sync": false
      }
    },
    "size": {
      "value": 5,
      "random": true,
      "anim": {
        "enable": false,
        "speed": 40,
        "size_min": 0.1,
        "sync": false
      }
    },
    "line_linked": {
      "enable": true,
      "distance": 150,
      "color": "#dadada",
      "opacity": 0.4,
      "width": 1
    },
    "move": {
      "enable": true,
      "speed": 6,
      "direction": "none",
      "random": false,
      "straight": false,
      "out_mode": "out",
      "attract": {
        "enable": false,
        "rotateX": 600,
        "rotateY": 1200
      }
    }
  },
  "interactivity": {
    "detect_on": "canvas",
    "events": {
      "onhover": {
        "enable": true,
        "mode": "repulse"
      },
      "onclick": {
        "enable": true,
        "mode": "push"
      },
      "resize": true
    },
    "modes": {
      "grab": {
        "distance": 400,
        "line_linked": {
          "opacity": 1
        }
      },
      "bubble": {
        "distance": 400,
        "size": 40,
        "duration": 2,
        "opacity": 8,
        "speed": 3
      },
      "repulse": {
        "distance": 200
      },
      "push": {
        "particles_nb": 4
      },
      "remove": {
        "particles_nb": 2
      }
    }
  },
  "retina_detect": true,
  "config_demo": {
    "hide_card": false,
    "background_color": "#b61924",
    "background_image": "",
    "background_position": "50% 50%",
    "background_repeat": "no-repeat",
    "background_size": "cover"
  }
});

